# 📚 도서 대출 시스템 (Library Loan System)

이 프로젝트는 **도서 대출·반납·예약 관리 기능**을 제공하는 도서관 관리 시스템입니다.  
회원은 책을 검색하고 대출·반납·예약할 수 있으며, 관리자는 전체 대출 현황과 예약 대기열을 관리할 수 있습니다.

---

## 🚀 주요 기능

### 🔑 회원 관리
- 회원가입 (이메일, 비밀번호, 이름 등록)
- 로그인 / 로그아웃
- 마이페이지에서 내 대출·예약 현황 조회

### 📖 도서 검색 및 조회
- 제목, 저자, ISBN 검색 지원
- 도서 상세 페이지: **제목, 저자, 출판일, ISBN, 청구기호, 이미지**
- 대출 가능 권수 표시 (예: `대출 가능 2권` or `예약만 가능`)

### 📚 대출 관리
- 대출하기
  - 동일 도서 중복 대출 방지
  - 대출 가능 권수 차감
  - 대출 기록 생성 (대출일, 반납예정일, 상태=대출중)
- 반납하기
  - 상태 변경(`반납완료`)
  - 대출 가능 권수 증가
  - 예약 대기열 확인 후 알림 발송

### 📝 예약 관리
- 예약하기 (재고가 0일 경우)
- 상태 흐름:
  - `Waiting (대기중)` → `Notified (알림발송됨, 3일 유효)` → `Fulfilled (확정됨)` / `Expired (만료)` / `Cancelled (취소)`
- 알림 처리
  - 반납 시 맨 앞 예약자에게 알림
  - 알림 수신 후 3일 이내 확정 가능
  - 예약 만료 시 다음 대기자에게 자동 알림
  - 예약 취소 가능

### 📊 대출/예약 현황·이력 조회
- 회원:
  - 마이페이지에서 조회
  - 대출중 / 반납완료 / 연체 탭 구분
  - 예약 대기중 / 알림발송됨 / 확정됨 / 만료 / 취소
- 관리자:
  - 특정 도서/회원 기준 대출 상태·예약 대기열 조회

---

## 🔄 시스템 배치 및 알림
- **연체 점검** (하루 1회)
  - 연체 도서 자동 표시 및 알림 발송

-

## 🖥 화면 흐름

- **검색 화면**
  - 도서 목록 (대출 가능/예약 가능 표시)
- **도서 상세 화면**
  - [대출하기] 또는 [예약하기] 버튼
- **마이페이지**
  - 대출 탭: 대출중/반납예정일/연체 표시
  - 예약 탭: 대기중/알림발송됨(남은 시간)/만료/확정
- **관리자 화면**
  - 반납 처리, 연체 관리, 예약 대기열 확인/조정, 알림 로그 확인

---

## 🗂️ 데이터 모델 (예시)

### User (회원)
- `id`, `email`, `password`, `name`, `가입일자`

### Book (도서)
- `id`, `title`, `author`, `isbn`, `publisher`, `publication_date`, `total_count`, `available_count`

### Loan (대출)
- `id`, `user_id`, `book_id`, `loan_date`, `due_date`, `return_date`, `status (Active / Returned / Overdue)`

### Reservation (예약)
- `id`, `user_id`, `book_id`, `request_date`,  
  `status (Waiting / Notified / Fulfilled / Expired / Cancelled)`,  
  `expire_at`

---

## ⚙️ 상태 정의

### 대출 상태
- `Active` (대출중)
- `Returned` (반납완료)
- `Overdue` (연체)

### 예약 상태
- `Waiting` (대기중)
- `Notified` (알림발송됨, 3일 유효)
- `Fulfilled` (확정됨)
- `Expired` (만료)
- `Cancelled` (취소)

---

## 📖 실행 시나리오 예시
1. 회원이 **Spring in Action** 검색 → 현재 `0권 남음`
2. [예약하기] 클릭 → 예약 상태 `Waiting` 등록
3. 다른 회원이 반납 시 → 첫 번째 예약자에게 `Notified` 전환, 만료시각 3일 뒤 설정
4. 예약자가 2일 뒤 [예약 확정] 클릭 → 대출 전환 완료
5. 마이페이지 → `대출중` 상태 확인 가능
